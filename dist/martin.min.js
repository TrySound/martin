/*!
 * martin 1.1.0
 * Extendable vanillaJS slider
 * https://github.com/TrySound/martin
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e){function t(e,f){var c,u,v,p,h,x,m;if(f=f||{},"string"==typeof e&&(e=i.querySelector(e)),e instanceof Node){if(c=t.get(e))return c;if(c=this,d.push(e),l.push(c),e.classList.add(r),c.el=e,p=e.querySelectorAll("."+r+"-slide"),u=c.length=p.length){for(u-=1;~u;u-=1)h=c[u]=p[u],x=h.classList,x.add(s),x.contains(o)&&(v=u,m=x,m.remove(o));m||(v=0,m=x),m.add(o),c.index=v}c.cbs={init:[],slide:[],slideprev:[],slidenext:[]};for(u in a)a.hasOwnProperty(u)&&(c["_"+u]={},a[u].call(c,f));return n(c,"init"),c}throw Error("Martin: unexpected selector or element")}function n(e,t,n){for(var i=e.cbs[t],r=i.length-1,o=!0;~r;r-=1)i[r](n)===!1&&(o=!1);return o}var i=e.document,r="martin",o=r+"-active",s=r+"-ditr",d=[],l=[],a={};"object"==typeof exports?module.exports=t:e.Martin=t,t.prototype={slideTo:function(e,t){var i,d,l=this,a=l.index;return e>-1&&e<l.length&&e!==a&&(t=l.option(t,e>a),i=l[a].classList,d=l[e].classList,n(l,"slide",{index:e,dir:t}))?(i.add(s),i.remove(r+"-to-prev"),i.remove(r+"-to-next"),d.add(s),d.remove(r+"-from-prev"),d.remove(r+"-from-next"),i.add(r+(t?"-from-prev":"-from-next")),d.add(r+(t?"-to-next":"-to-prev")),l.el.offsetHeight,i.remove(s),d.remove(s),i.remove(o),d.add(o),l.index=e,!0):void 0},slidePrev:function(){var e=this,t=e.index-1;return-1===t&&(t=e.length-1),n(e,"slideprev",{index:t})?e.slideTo(t,!1):void 0},slideNext:function(){var e=this,t=e.index+1;return t===e.length&&(t=0),n(e,"slidenext",{index:t})?e.slideTo(t,!0):void 0},on:function(e,t){var n=this,i=n.cbs[e.toLowerCase()];i&&"function"==typeof t&&i.unshift(t.bind(n))},option:function(){var e,t,n=arguments;for(e=0,t=n.length;t>e;e++)if(void 0!==n[e])return n[e]},attr:function(e){return"string"==typeof e?(e=this.el.getAttribute("data-"+r+"-"+e),""===e||null===e?void 0:"true"===e?!0:"false"===e?!1:isNaN(e)?e:Number(e)):void 0},listen:function(e,t,n){var i=this.el;return"function"==typeof t&&(n=t,t=e,e=!1),"string"==typeof e&&(i=i.querySelector(e)),e instanceof Node&&(i=e),i&&i.addEventListener(t,n),i}},t.get=function(e){return e=d.indexOf(e),~e?l[e]:void 0},t.hook=function(e,t){"string"==typeof e&&"function"==typeof t&&(a[e]=t)},i.addEventListener("DOMContentLoaded",function(){for(var e=i.querySelectorAll("."+r+"-slideshow"),n=e.length-1;~n;n-=1)new t(e[n])})}((0,eval)(this)),Martin.hook("controls",function(e){var t=this,n=t.attr("prev")||e.prev||".martin-prev",i=t.attr("next")||e.next||".martin-next";t.prev=t.listen(n,"click",function(){t.slidePrev()}),t.next=t.listen(i,"click",function(){t.slideNext()})});