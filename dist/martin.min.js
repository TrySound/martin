/*!
 * martin 0.2.5
 * Extendable vanillaJS slider
 * https://github.com/TrySound/martin
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e,t){function i(e,a){var c,v,u;if(a=a||{},"string"==typeof e&&(e=t.querySelector(e)),e instanceof Node){if(c=i.get(e))return c;c=this,d.push(e),l.push(c),c.slider=e,c.slides=n.call(e.querySelectorAll("."+o+"-slide"),0),c.cbs={init:[],set:[],slide:[],slidePrev:[],slideNext:[]};for(v in s)s.hasOwnProperty(v)&&(c["_"+v]={},s[v].call(c,a));return e.classList.add(o+"-slideshow"),u=e.querySelector("."+o+"-slide."+o+"-active"),c.setTo(u?c.slides.indexOf(u):0),r.call(c,"init"),c}throw Error("Martin: unexpected selector or element")}function r(e,t){var i,r,n=this.cbs[e],s=!0;for(i=0,r=n.length;r>i;i+=1)n[i].call(this,t)===!1&&(s=!1);return s}var n=[].slice,s={},o="martin",d=[],l=[];i.prototype={setTo:function(e){var t=this,i=t.slides[t.index],n=t.slides[e],s=o+"-ditr",d=o+"-active";return n&&r.call(t,"set",{index:e})?(n=n.classList,i&&(i=i.classList,i.add(s),i.remove(d)),n.add(s),n.add(d),t.slider.offsetHeight,i&&i.remove(s),n.remove(s),t.index=e,!0):void 0},slideTo:function(e,t){var i,n,s=this,d=s.slides,l=s.index,a=d.length,c=o+"-ditr";return e>-1&&a>e&&e!==l&&(t=s.option(t,e>l),i=d[l],n=d[e],i&&n&&r.call(s,"slide",{index:e,dir:t}))?(i=i.classList,n=n.classList,i.add(c),n.add(c),i.remove(o+"-to-prev"),i.remove(o+"-to-next"),n.remove(o+"-from-prev"),n.remove(o+"-from-next"),i.add(o+(t?"-from-prev":"-from-next")),n.add(o+(t?"-to-next":"-to-prev")),s.slider.offsetHeight,i.remove(c),n.remove(c),i.remove(o+"-active"),n.add(o+"-active"),s.index=e,!0):void 0},slidePrev:function(){var e=this,t=e.index-1;return 0>t&&(t=e.slides.length-1),r.call(e,"slidePrev",{index:t})?e.slideTo(t,!1):void 0},slideNext:function(){var e=this,t=e.index+1;return t>e.slides.length-1&&(t=0),r.call(e,"slideNext",{index:t})?e.slideTo(t,!0):void 0},on:function(e,t){var i=this.cbs[e];i&&i.push(t)},option:function(){var e,t,i=arguments;for(e=0,t=i.length;t>e;e++)if(void 0!==i[e])return i[e]},attr:function(e){var t;return e&&"string"==typeof e?(t=this.slider.getAttribute("data-"+o+"-"+e),""===t||null===t?void 0:"true"===t?!0:"false"===t?!1:isNaN(t)?t:Number(t)):void 0},listen:function(e,t,i){var r=this.slider;return"function"==typeof t&&(i=t,t=e,e=!1),e&&(r=r.querySelector(e)),r&&r.addEventListener(t,i),r}},i.hook=function(e,t){"string"==typeof e&&"function"==typeof t&&(s[e]=t)},i.get=function(e){var t=d.indexOf(e);return-1!==t?l[t]:void 0},t.addEventListener("DOMContentLoaded",function(){for(var e=t.querySelectorAll("."+o+"-slideshow"),r=e.length-1;-1!==r;r-=1)new i(e[r])}),e.Martin=i}(window,document),Martin.hook("controls",function(e){var t=this,i=(t.slider,t.attr("prev")||e.prev||".martin-prev"),r=t.attr("next")||e.next||".martin-next";t.prev=t.listen(i,"click",function(){t.slidePrev()}),t.next=t.listen(r,"click",function(){t.slideNext()})});