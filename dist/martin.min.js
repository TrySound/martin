/*!
 * martin 1.0.1
 * Extendable vanillaJS slider
 * https://github.com/TrySound/martin
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e){function t(e,f){var a,c,u,v,h,p,x;if(f=f||{},"string"==typeof e&&(e=i.querySelector(e)),e instanceof Node){if(a=t.get(e))return a;if(a=this,s.push(e),d.push(a),e.classList.add(r),a.el=e,v=e.querySelectorAll("."+r+"-slide"),c=a.length=v.length){for(c-=1;~c;c-=1)h=a[c]=v[c],p=h.classList,p.contains(o)&&(u=c,x=p,x.remove(o));x||(u=0,x=p),x.add(o),a.index=u}a.cbs={init:[],slide:[],slidePrev:[],slideNext:[]};for(c in l)l.hasOwnProperty(c)&&(a["_"+c]={},l[c].call(a,f));return n(a,"init"),a}throw Error("Martin: unexpected selector or element")}function n(e,t,n){for(var i=e.cbs[t],r=i.length-1,o=!0;~r;r-=1)i[r](n)===!1&&(o=!1);return o}var i=e.document,r="martin",o=r+"-active",s=[],d=[],l={};"object"==typeof exports?module.exports=t:e.Martin=t,t.prototype={slideTo:function(e,t){var i,s,d=this,l=d.index,f=r+"-tr";return e>-1&&e<d.length&&e!==l&&(t=d.option(t,e>l),i=d[l].classList,s=d[e].classList,n(d,"slide",{index:e,dir:t}))?(i.remove(f),i.remove(r+"-to-prev"),i.remove(r+"-to-next"),s.remove(f),s.remove(r+"-from-prev"),s.remove(r+"-from-next"),i.add(r+(t?"-from-prev":"-from-next")),s.add(r+(t?"-to-next":"-to-prev")),d.el.offsetHeight,i.add(f),s.add(f),i.remove(o),s.add(o),d.index=e,!0):void 0},slidePrev:function(){var e=this,t=e.index-1;return-1===t&&(t=e.length-1),n(e,"slidePrev",{index:t})?e.slideTo(t,!1):void 0},slideNext:function(){var e=this,t=e.index+1;return t===e.length&&(t=0),n(e,"slideNext",{index:t})?e.slideTo(t,!0):void 0},on:function(e,t){var n=this,i=n.cbs[e];i&&"function"==typeof t&&i.unshift(t.bind(n))},option:function(){var e,t,n=arguments;for(e=0,t=n.length;t>e;e++)if(void 0!==n[e])return n[e]},attr:function(e){return"string"==typeof e?(e=this.el.getAttribute("data-"+r+"-"+e),""===e||null===e?void 0:"true"===e?!0:"false"===e?!1:isNaN(e)?e:Number(e)):void 0},listen:function(e,t,n){var i=this.el;return"function"==typeof t&&(n=t,t=e,e=!1),"string"==typeof e&&(i=i.querySelector(e)),e instanceof Node&&(i=e),i&&i.addEventListener(t,n),i}},t.get=function(e){return e=s.indexOf(e),~e?d[e]:void 0},t.hook=function(e,t){"string"==typeof e&&"function"==typeof t&&(l[e]=t)},i.addEventListener("DOMContentLoaded",function(){for(var e=i.querySelectorAll("."+r+"-slideshow"),n=e.length-1;~n;n-=1)new t(e[n])})}((0,eval)(this)),Martin.hook("controls",function(e){var t=this,n=t.attr("prev")||e.prev||".martin-prev",i=t.attr("next")||e.next||".martin-next";t.prev=t.listen(n,"click",function(){t.slidePrev()}),t.next=t.listen(i,"click",function(){t.slideNext()})});