/*!
 * martin 0.1.4
 * Extendable vanillaJS slider
 * https://github.com/TrySound/martin
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e,t){function i(e,i){var r,o,l=this;if(i=i||{},"string"==typeof e&&(e=t.querySelector(e)),e instanceof Node){l.slider=e,l.slides=n.call(e.querySelectorAll("."+d+"-slide"),0),l._cbs={set:[],slide:[],slidePrev:[],slideNext:[]},e.classList.add(d+"-slideshow"),o=e.querySelector("."+d+"-slide."+d+"-active"),l.setTo(o?l.slides.indexOf(o):0);for(r in s)s.hasOwnProperty(r)&&s[r].call(l,i);return l}throw Error("Martin: unexpected selector or element")}function r(e,t){var i,r,n=this._cbs[e],s=!0;for(i=0,r=n.length;r>i;i+=1)n[i].call(this,t)===!1&&(s=!1);return s}var n=[].slice,s={},d="martin";i.prototype={setTo:function(e){var t=this,i=t.slides[t.index],n=t.slides[e];n&&r.call(t,"set",{index:e})&&(n=n.classList,i&&(i=i.classList,i.add(d+"-ditr"),i.remove(d+"-active")),n.add(d+"-ditr"),n.add(d+"-active"),t.slider.offsetHeight,i&&i.remove(d+"-ditr"),n.remove(d+"-ditr"),t.index=e)},slideTo:function(e,t){var i,n,s=this,o=s.index,l=s.slides.length;return l>0&&l>e&&e!==o&&(void 0===t&&(t=e>o),r.call(s,"slide",{index:e,dir:t})!==!1)?(i=s.slides[o].classList,n=s.slides[e].classList,i.add(d+"-ditr"),n.add(d+"-ditr"),i.remove(d+"-to-prev"),i.remove(d+"-to-next"),n.remove(d+"-from-prev"),n.remove(d+"-from-next"),i.add(d+(t?"-from-prev":"-from-next")),n.add(d+(t?"-to-next":"-to-prev")),s.slider.offsetHeight,i.remove(d+"-ditr"),n.remove(d+"-ditr"),i.remove(d+"-active"),n.add(d+"-active"),s.index=e,!0):!1},slidePrev:function(){var e=this,t=e.index-1;0>t&&(t=e.slides.length-1),r.call(e,"slidePrev",{index:t})&&e.slideTo(t,!1)},slideNext:function(){var e=this,t=e.index+1;t>e.slides.length-1&&(t=0),r.call(e,"slideNext",{index:t})&&e.slideTo(t,!0)},on:function(e,t){var i=this._cbs[e];i&&i.push(t)},attr:function(e){var t;return e&&"string"==typeof e?(t=this.slider.getAttribute("data-"+d+"-"+e),""===t||null===t?void 0:"true"===t?!0:"false"===t?!1:isNaN(t)?t:Number(t)):void 0},listen:function(e,t,i){var r=this.slider;return"function"==typeof t&&(i=t,t=e,e=!1),e&&(r=r.querySelector(e)),r&&r.addEventListener(t,i),r}},i.hook=function(e,t){e&&"string"==typeof e&&"function"==typeof t&&(s[e]=t)},e.Martin=i,t.addEventListener("DOMContentLoaded",function(){n.call(t.querySelectorAll("."+d+"-slideshow"),0).forEach(function(e){new i(e)})})}(window,document),Martin.hook("controls",function(e){var t=this,i=(t.slider,t.attr("prev")||e.prev||".martin-prev"),r=t.attr("next")||e.next||".martin-next";t.prev=t.listen(i,"click",function(){t.slidePrev()}),t.next=t.listen(r,"click",function(){t.slideNext()})});