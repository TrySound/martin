/*!
 * martin 1.1.2
 * https://github.com/TrySound/martin
 * Copyright 2015 Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e){function t(f,a){var u,c,v,p,h,x,m;if(a=a||{},"string"==typeof f&&(f=e.querySelector(f)),f instanceof Node){if(u=t.get(f))return u;if(u=this,d.push(f),s.push(u),f.classList.add(i),u.el=f,p=f.querySelectorAll("."+i+"-slide"),c=u.length=p.length){for(c-=1;~c;c-=1)h=u[c]=p[c],x=h.classList,x.add(o),x.contains(r)&&(v=c,m=x,m.remove(r));m||(v=0,m=x),m.add(r),u.index=v}u.cbs={init:[],slide:[],slideprev:[],slidenext:[]};for(c in l)l.hasOwnProperty(c)&&(u["_"+c]={},l[c].call(u,a));return n(u,"init"),u}throw Error("Martin: unexpected selector or element")}function n(e,t,n){for(var i=e.cbs[t],r=i.length-1,o=!0;~r;r-=1)i[r](n)===!1&&(o=!1);return o}var i="martin",r=i+"-active",o=i+"-ditr",d=[],s=[],l={};t.prototype={slideTo:function(e,t){var d,s,l=this,f=l.index;return e>-1&&e<l.length&&e!==f&&(t=l.option(t,e>f),d=l[f].classList,s=l[e].classList,n(l,"slide",{index:e,dir:t}))?(d.add(o),d.remove(i+"-to-prev"),d.remove(i+"-to-next"),s.add(o),s.remove(i+"-from-prev"),s.remove(i+"-from-next"),d.add(i+(t?"-from-prev":"-from-next")),s.add(i+(t?"-to-next":"-to-prev")),l.el.offsetHeight,d.remove(o),s.remove(o),d.remove(r),s.add(r),l.index=e,!0):void 0},slidePrev:function(){var e=this,t=e.index-1;return-1===t&&(t=e.length-1),n(e,"slideprev",{index:t})?e.slideTo(t,!1):void 0},slideNext:function(){var e=this,t=e.index+1;return t===e.length&&(t=0),n(e,"slidenext",{index:t})?e.slideTo(t,!0):void 0},on:function(e,t){var n=this,i=n.cbs[e.toLowerCase()];i&&"function"==typeof t&&i.unshift(t.bind(n))},option:function(){var e,t,n=arguments;for(e=0,t=n.length;t>e;e++)if(void 0!==n[e])return n[e]},attr:function(e){return"string"==typeof e?(e=this.el.getAttribute("data-"+i+"-"+e),""===e||null===e?void 0:"true"===e?!0:"false"===e?!1:isNaN(e)?e:Number(e)):void 0},listen:function(e,t,n){var i=this.el;return"function"==typeof t&&(n=t,t=e,e=!1),"string"==typeof e&&(i=i.querySelector(e)),e instanceof Node&&(i=e),i&&i.addEventListener(t,n),i}},t.get=function(e){return e=d.indexOf(e),~e?s[e]:void 0},t.hook=function(e,t){"string"==typeof e&&"function"==typeof t&&(l[e]=t)},e.addEventListener("DOMContentLoaded",function(){for(var n=e.querySelectorAll("."+i+"-slideshow"),r=n.length-1;~r;r-=1)new t(n[r])}),l.controls=function(e){var t=this,n=t.attr("prev")||e.prev||".martin-prev",i=t.attr("next")||e.next||".martin-next";t.prev=t.listen(n,"click",function(){t.slidePrev()}),t.next=t.listen(i,"click",function(){t.slideNext()})},"object"==typeof module&&module.exports?module.exports=t:window.Martin=t}(document);